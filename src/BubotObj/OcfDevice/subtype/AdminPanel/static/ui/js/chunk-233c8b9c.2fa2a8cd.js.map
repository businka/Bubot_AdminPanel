{"version":3,"sources":["webpack:///./src/BubotCore/components/Simple/FieldLink.vue?98e2","webpack:///src/BubotCore/components/Simple/FieldLink.vue","webpack:///./src/BubotCore/components/Simple/FieldLink.vue?15de","webpack:///./src/BubotCore/components/Simple/FieldLink.vue","webpack:///./src/BubotCore/helpers/mixinTemplate/action.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","value","titleField","label","readOnly","autofocus","on","$event","type","indexOf","_k","keyCode","key","stopPropagation","emitAction","name","undefined","beginSelect","viewItem","clearItem","formHandler","tag","formUid","formData","onAction","_e","staticRenderFns","components","RightDrawerFormViewer3","mixins","props","Object","default","String","fields","Array","multiSelect","Boolean","data","selectionFormVisible","methods","$emit","actionRowActivate","actionCloseForm","console","log","row","title","actionSelectItems","length","_selectValue","component","VTextField","action","$options","_action","prototype","hasOwnProperty","call","dispatchAction","namespace","store","$store","dispatch","params","root"],"mappings":"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","file":"js/chunk-233c8b9c.2fa2a8cd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-text-field',{staticClass:\"linkField pb-1\",attrs:{\"value\":_vm.value?_vm.value[_vm.titleField||'title']:'',\"label\":_vm.label,\"append-icon\":\"mdi-chevron-up\",\"clearable\":\"\",\"hide-details\":\"\",\"disabled\":_vm.readOnly,\"flat\":\"\",\"readonly\":\"\",\"autofocus\":_vm.autofocus},on:{\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.stopPropagation();return _vm.emitAction({name:'Update'})},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"escape\",undefined,$event.key,undefined)){ return null; }$event.stopPropagation();return _vm.emitAction({name:'Cancel'})},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"])){ return null; }$event.stopPropagation();return _vm.beginSelect($event)}],\"click\":_vm.viewItem,\"click:append\":_vm.beginSelect,\"click:clear\":_vm.clearItem}}),(_vm.selectionFormVisible)?_c(_vm.formHandler,{tag:\"component\",attrs:{\"form-uid\":_vm.formUid,\"form-data\":_vm.formData},on:{\"action\":function($event){return _vm.onAction($event, 'selectForm')}}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\r\nimport ActionMixin from '../../helpers/mixinTemplate/action'\r\n// import {objHasOwnProperty} from '../../helpers/baseHelper'\r\n\r\nexport default {\r\n  name: 'FieldLink',\r\n  components: {\r\n    RightDrawerFormViewer3: () => import('../FormViewer/RightDrawerFormViewer3'),\r\n  },\r\n  mixins: [ActionMixin],\r\n  props: {\r\n    value: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    formHandler: {\r\n      type: String,\r\n      default: 'RightDrawerFormViewer3'\r\n    },\r\n    label: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    titleField: {\r\n      type: String,\r\n      default: 'title'\r\n    },\r\n    fields: {\r\n      type: Array,\r\n      default: () => ([])\r\n    },\r\n    formUid: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    formData: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    multiSelect: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    readOnly: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    autofocus: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data: function () {\r\n    return {\r\n      selectionFormVisible: false\r\n    }\r\n  },\r\n  methods: {\r\n    viewItem () {\r\n    },\r\n    beginSelect () {\r\n      this.selectionFormVisible = true\r\n      // const data = Object.assign(this.params, { visible: true, action: this.onAction })\r\n      // this.emitAction('ShowSelectForm', data)\r\n\r\n    },\r\n    clearItem () {\r\n      this.$emit('input', null)\r\n    },\r\n    actionRowActivate (data) {\r\n      this.actionCloseForm()\r\n      this.$emit('input', data)\r\n      console.log('input link-field ' + data.row.title)\r\n    },\r\n    actionSelectItems (data) {\r\n      let _selectValue = null\r\n      if (data.length) {\r\n        if (this.multiSelect){\r\n          _selectValue = data\r\n        } else {\r\n          _selectValue = data[0]\r\n        }\r\n      }\r\n      this.$emit('input', _selectValue)\r\n      this.actionCloseForm()\r\n    },\r\n    // eslint-disable-next-line no-unused-vars\r\n    actionCloseForm (data, component) {\r\n      this.selectionFormVisible = false\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\r\n\r\n<template>\r\n  <div>\r\n    <v-text-field\r\n      class=\"linkField pb-1\"\r\n      :value=\"value?value[titleField||'title']:''\"\r\n      :label=\"label\"\r\n      append-icon=\"mdi-chevron-up\"\r\n      clearable\r\n      hide-details\r\n      :disabled=\"readOnly\"\r\n      flat\r\n      readonly\r\n      :autofocus=\"autofocus\"\r\n      @keydown.enter.stop=\"emitAction({name:'Update'})\"\r\n      @keydown.escape.stop=\"emitAction({name:'Cancel'})\"\r\n      @keydown.up.stop=\"beginSelect\"\r\n      @click=\"viewItem\"\r\n      @click:append=\"beginSelect\"\r\n      @click:clear=\"clearItem\"\r\n    />\r\n    <component\r\n      :is=\"formHandler\"\r\n      v-if=\"selectionFormVisible\"\r\n      :form-uid=\"formUid\"\r\n      :form-data=\"formData\"\r\n      @action=\"onAction($event, 'selectForm')\"\r\n    />\r\n  </div>\r\n</template>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldLink.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldLink.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FieldLink.vue?vue&type=template&id=2bc6f4b4&\"\nimport script from \"./FieldLink.vue?vue&type=script&lang=js&\"\nexport * from \"./FieldLink.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VTextField})\n","export default {\r\n  methods: {\r\n    onAction (action, component) {\r\n      console.log(`${this.$options.name} on action ${action.name}`)\r\n      let _action = `action${action.name}`\r\n      if (Object.prototype.hasOwnProperty.call(this, _action)) {\r\n        this[_action](action.data, component)\r\n      } else {\r\n        this.emitAction(action.name, action.data)\r\n      }\r\n    },\r\n    emitAction (name, data) {\r\n      this.$emit('action', { name, data })\r\n    },\r\n    async dispatchAction (action) {\r\n      const data = action.data || {}\r\n      // const action_method = `action${action.name}`\r\n      // if (Object.prototype.hasOwnProperty.call(this, action_method)) {\r\n      //   this[action_method](action)\r\n      // } else {\r\n      let namespace = data.namespace || this.store.namespace\r\n\r\n      console.log(`${this.$options.name} dispatch action ${namespace}/${action.name}`)\r\n      await this.$store.dispatch(\r\n        `${namespace}/${action.name}`,\r\n        {\r\n          store: this.store,\r\n          params: this.params,\r\n          data: action.data\r\n        },\r\n        { root: true })\r\n      // }\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}