{"version":3,"sources":["webpack:///./src/components/OCF/store.js","webpack:///./node_modules/core-js/modules/es.reflect.get.js","webpack:///./src/components/OCF/OcfSchema.store.js","webpack:///./src/BubotCore/components/Types/Source/Source.js","webpack:///./src/BubotCore/components/Types/Source/Memory.js","webpack:///./src/BubotCore/components/Types/Source/Service.js","webpack:///./node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack:///./node_modules/@babel/runtime/helpers/esm/get.js","webpack:///./src/BubotCore/components/Types/Source/Vuex.js","webpack:///./src/BubotCore/components/Types/Source/DataSourceLoader.js","webpack:///./src/components/OCF/OcfDevice.vue?d518","webpack:///src/components/OCF/OcfDevice.vue","webpack:///./src/components/OCF/OcfDevice.vue?2748","webpack:///./src/components/OCF/OcfDevice.vue","webpack:///./src/components/OCF/OcfDevice.vue?a25b"],"names":["namespaced","state","getters","mode","getProps","mutations","initStoreKey","updateItemProps","loading","uid","item","actions","initForm","error","read","store","payload","commit","processInDataSource","update","data","$","isObject","anObject","has","getOwnPropertyDescriptorModule","getPrototypeOf","get","target","propertyKey","descriptor","prototype","receiver","arguments","length","f","value","undefined","call","stat","schema","Vue","set","schemaUid","Object","hasOwnProperty","console","log","result","axios","rootState","app","params","id","response","Source","props","rows","page","filter","itemsPerPage","appName","objName","dataTableOptions","filterFields","keyProperty","this","changeProps","rawData","updateObject","query","Error","conditions","filterField","filterValue","row","Memory","filteredRawData","i","match","isEmptyObject","fields","condition","objHasOwnProperty","elem","indexOf","e","push","queryAll","limit","start","end","slice","total","Service","buxios","resp","post","method","_superPropBase","object","property","_get","Reflect","base","superPropBase","desc","getOwnPropertyDescriptor","Vuex","operation","root","actionName","dataSource","dispatch","storeName","dispatchName","availableSources","initDataSource","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","toolBar","title","on","onAction","_e","mainRes","_l","key","deviceLink","res","index","href","_id","ep","serviceRes","_v","_s","$t","staticRenderFns","name","components","OcfResourceTmpl","PanelToolBar","mixins","type","default","defaultAction","computed","resIndex","selected","active","users","find","source","watch","init","beforeCreate","$store","registerModule","$options","methods","actionCallDataSourceForSelectedItems","items","component","VContainer","VProgressLinear"],"mappings":"0LAKe,QACbA,YAAY,EACZC,MAAO,GAIPC,QAAS,CAEPC,KAAMA,OACNC,SAAUA,QAEZC,UAAW,CACTC,aAAcA,OACdC,gBAAiBA,OACjBC,QAHS,SAGDP,EAHC,GAG8B,IAAtBQ,EAAsB,EAAtBA,IAAKD,EAAiB,EAAjBA,QAASE,EAAQ,EAARA,KAC7BT,EAAMQ,GAAO,CAAED,UAASE,UAG5BC,QAAS,CACPC,SAAUA,OACVC,MAAOA,OACPC,KAAM,WAAF,8CAAE,WAAOC,EAAOC,GAAd,8FACJD,EAAME,OAAO,UAAW,CAAER,IAAKO,EAAQD,MAAMN,IAAKC,KAAM,GAAIF,SAAS,IADjE,SAEaU,eAAoB,OAAQH,EAAOC,GAFhD,OAEAN,EAFA,OAGJK,EAAME,OAAO,UAAW,CAAER,IAAKO,EAAQD,MAAMN,IAAKC,OAAMF,SAAS,IAH7D,2CAAF,wDAAE,GAKNW,OAAQ,WAAF,8CAAE,WAAOJ,EAAOC,GAAd,wFAENA,EAAQI,KAAOL,EAAMd,MAAMe,EAAQD,MAAMN,KAAKC,KAFxC,SAGAQ,eAAoB,SAAUH,EAAOC,GAHrC,2CAAF,wDAAE,M,gDC/BZ,IAAIK,EAAI,EAAQ,QACZC,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAM,EAAQ,QACdC,EAAiC,EAAQ,QACzCC,EAAiB,EAAQ,QAI7B,SAASC,EAAIC,EAAQC,GACnB,IACIC,EAAYC,EADZC,EAAWC,UAAUC,OAAS,EAAIN,EAASK,UAAU,GAEzD,OAAIV,EAASK,KAAYI,EAAiBJ,EAAOC,IAC7CC,EAAaL,EAA+BU,EAAEP,EAAQC,IAAqBL,EAAIM,EAAY,SAC3FA,EAAWM,WACQC,IAAnBP,EAAWH,SACTU,EACAP,EAAWH,IAAIW,KAAKN,GACtBV,EAASS,EAAYL,EAAeE,IAAiBD,EAAII,EAAWF,EAAaG,QAArF,EAGFX,EAAE,CAAEO,OAAQ,UAAWW,MAAM,GAAQ,CACnCZ,IAAKA,K,+FCfQ,QACb3B,YAAY,EACZC,MAAO,GAEPI,UAAW,CACTmC,OADS,SACDvC,EADC,GACuB,IAAfQ,EAAe,EAAfA,IAAK+B,EAAU,EAAVA,OACpBC,OAAIC,IAAIzC,EAAOQ,EAAK+B,KAGxB7B,QAAS,CACDG,KADC,SACKC,EAAO4B,GAAW,wJACvBA,EADuB,yCAEnB,IAFmB,WAUxBC,OAAOb,UAAUc,eAAeP,KAAKvB,EAAMd,MAAO0C,GAV1B,gCAWb5B,EAAMd,MAAM0C,GAXC,sDAa1BG,QAAQC,IAAI,eAAiBJ,GACzBK,EAAS,GAda,oBAgBDC,IAAMtB,IAAN,eAAkBZ,EAAMmC,UAAUC,IAAlC,mBAAwD,CAAEC,OAAQ,CAAEC,GAAIV,KAhBvE,QAgBlBW,EAhBkB,OAiBxBN,EAASM,EAASlC,KAjBM,sDAmBxB4B,EAAS,GAnBe,eAqB1BjC,EAAME,OAAO,SAAU,CACrBR,IAAKkC,EAAWH,OAAQQ,IAtBA,kBAwBnBA,GAxBmB,iE,sOCfbO,E,WAsBnB,WAAaC,EAAOzC,GAAO,qDArBjB,IAqBiB,sCApBT,IAoBS,4BAnBnB,GAmBmB,2BAjBpB,IAiBoB,4BAhBnB,CACN0C,KAAM,GACNC,KAAM,EACNC,OAAQ,GACRC,aAAc,GACdC,QAAS,GACTC,QAAS,GACTC,iBAAkB,GAClBC,aAAc,GACdC,YAAa,OAOY,6GAHjB,GAGiB,mCAFZ,IAGbC,KAAKV,MAAMK,QAAU9C,EAAMd,MAAMkD,IACjCe,KAAKnD,MAAQA,EACbmD,KAAKC,YAAYX,GACjBU,KAAKE,QAAUF,KAAKV,MAAMC,MAAQ,GAClCS,KAAKD,YAAcC,KAAKV,MAAMS,aAAe,K,2DAGlCT,GACXU,KAAKV,MAAQa,eAAaH,KAAKV,MAAOA,K,mCAG1BG,GACZO,KAAKV,MAAMG,OAASU,eAAaH,KAAKV,MAAMG,OAAQA,GACpDO,KAAKV,MAAMO,iBAAiBL,KAAO,EACnCQ,KAAKI,U,8BAIL,MAAM,IAAIC,MAAM,kD,6BAIhB,MAAM,IAAIA,MAAM,iD,6BAIhB,MAAM,IAAIA,MAAM,mD,KC/CdC,EAAa,CACjB,OAAU,SAAUC,EAAaC,EAAaC,GAC5C,OAAIA,EAAIF,EAAY,WAAaC,GAInC,GAAM,SAAUD,EAAaC,EAAaC,GACxC,QAAID,EAAY,IAAMC,EAAIF,EAAY,SAAWC,EAAY,OAGzDA,EAAY,IAAMC,EAAIF,EAAY,SAAWC,EAAY,MAO5CE,E,4PACZ,I,4DAGLV,KAAK1D,SAAU,EACf0D,KAAKW,gBAAkB,GACvB,IAAK,IAAIC,EAAI,EAAGA,EAAIZ,KAAKE,QAAQlC,OAAQ4C,IAAK,CAC5C,IAAMH,EAAMT,KAAKE,QAAQU,GACrBC,GAAQ,EACZ,IAAKC,eAAcd,KAAKV,MAAMG,QAC5B,IAAK,IAAImB,EAAI,EAAGA,EAAIZ,KAAKF,aAAa9B,OAAQ4C,IAC5C,GAAIlC,OAAOb,UAAUc,eAAeP,KAAK4B,KAAKV,MAAMG,OAAQO,KAAKe,OAAOH,GAAG,SAAU,CACnF,IAAII,EAAYV,EAAWN,KAAKe,OAAOH,GAAG,SAAW,UACrD,IAAKI,EAAUhB,KAAKe,OAAOH,GAAIZ,KAAKV,MAAMG,OAAOO,KAAKe,OAAOH,GAAG,SAAUH,GAAM,CAC9EI,GAAQ,EACR,OAKR,GAAKA,EAAL,CAEA,GAAII,eAAkBjB,KAAKV,MAAMG,OAAQ,iBAAmBO,KAAKV,MAAMG,OAAO,gBAE5E,IAAK,IAAIyB,KADTL,GAAQ,EACSJ,EACf,GAAI/B,OAAOb,UAAUc,eAAeP,KAAKqC,EAAKS,GAC5C,IACE,GAAIT,EAAIS,GAAMC,QAAQnB,KAAKV,MAAMG,OAAO,kBAAoB,EAAG,CAC7DoB,GAAQ,EACR,OAEF,MAAOO,IAMXP,GACFb,KAAKW,gBAAgBU,KAAKZ,IAG9B,OAAOT,KAAKW,kB,8BAIZX,KAAKsB,WACL,IAAMC,EAAQvB,KAAKV,MAAMI,aACnBF,EAAOQ,KAAKV,MAAME,KAClBgC,GAAShC,EAAO,GAAK+B,EACrBE,EAAMD,EAAQD,EACpBvB,KAAKT,KAAOS,KAAKW,gBAAgBe,MAAMF,EAAOC,GAC9CzB,KAAK2B,MAAQ3B,KAAKW,gBAAgB3C,OAClCgC,KAAK1D,SAAU,I,sFAGL6C,G,iFACVP,QAAQC,IAAIM,G,6LAGAjC,G,iFACZ0B,QAAQC,IAAI3B,G,6LAGAA,G,iFACZ0B,QAAQC,IAAI3B,G,0GAhEoBmC,G,YChBfuC,E,mLAEjB,OAAO,O,iCAIP,OAAO,O,6LAIP5B,KAAK1D,SAAU,E,SAGPiF,EAAQvB,KAAKV,MAAMI,aACnBF,EAAOQ,KAAKV,MAAME,KACpBN,EAASiB,eAAa,CACxBoB,QACA/B,QACCQ,KAAKV,MAAMG,Q,SAEDoC,OAAOpE,IAAP,eAAmBuC,KAAKV,MAAMK,QAA9B,YAAyCK,KAAKV,MAAMM,QAApD,UACX,CAAEV,W,OADJ4C,E,OAGA9B,KAAKT,KAAOuC,EAAK5E,KAAKqC,KACtBS,KAAK2B,OAASnC,EAAO,GAAK+B,EAAQvB,KAAKT,KAAKvB,QAAUgC,KAAKT,KAAKvB,OAASuD,EAAQ,EAAI,G,qDAErFvB,KAAKrD,MAAL,K,QAEFqD,KAAK1D,SAAU,E,yMAGL6C,G,8FACVa,KAAK1D,SAAU,E,kBAGAuF,OAAOpE,IAAP,eAAmBuC,KAAKV,MAAMK,QAA9B,YAAyCK,KAAKV,MAAMM,QAApD,SACX,CAAEV,OAAQ,CAAEC,Q,cADd2C,E,OAGA9B,KAAK1D,SAAU,E,kBACRwF,EAAK5E,M,uBAEZ8C,KAAK1D,SAAU,E,yNAIPQ,G,8FACVkD,KAAK1D,SAAU,E,kBAGAuF,OAAOE,KAAP,eAAoB/B,KAAKV,MAAMK,QAA/B,YAA0CK,KAAKV,MAAMM,QAArD,YAAgE9C,EAAQkF,QAAUlF,EAAQI,M,cAAvG4E,E,OACA9B,KAAK1D,SAAU,E,kBACRwF,EAAK5E,M,uBAEZ8C,KAAK1D,SAAU,E,wIArDgB+C,G,kCCJtB,SAAS4C,EAAeC,EAAQC,GAC7C,OAAQzD,OAAOb,UAAUc,eAAeP,KAAK8D,EAAQC,GAEnD,GADAD,EAAS1E,eAAe0E,GACT,OAAXA,EAAiB,MAGvB,OAAOA,ECNM,SAASE,EAAK1E,EAAQyE,EAAUrE,GAiB7C,OAfEsE,EADqB,qBAAZC,SAA2BA,QAAQ5E,IACrC4E,QAAQ5E,IAER,SAAcC,EAAQyE,EAAUrE,GACrC,IAAIwE,EAAOC,EAAc7E,EAAQyE,GACjC,GAAKG,EAAL,CACA,IAAIE,EAAO9D,OAAO+D,yBAAyBH,EAAMH,GAEjD,OAAIK,EAAK/E,IACA+E,EAAK/E,IAAIW,KAAKN,GAGhB0E,EAAKtE,QAITkE,EAAK1E,EAAQyE,EAAUrE,GAAYJ,G,IChBvBgF,E,4PACZ,I,4DAIL,OADA1C,KAAKE,QAAUF,KAAKnD,MAAMb,QAAX,UAAsBgE,KAAKV,MAAM,aAAjC,sBAAkEU,KAAKV,MAAMG,OAAOkD,WAAa,GAAI,CAAEC,MAAM,KAAW,GACvI,4D,sFAGUzD,G,iFACVP,QAAQC,IAAIM,G,6LAGAjC,G,iFACZ0B,QAAQC,IAAI3B,G,6LAGAA,G,iFACZ0B,QAAQC,IAAI3B,G,2LAGFA,G,wFAEVA,EAAK2F,WAAL,UAAsB7C,KAAKV,MAAMK,QAAjC,YAA4CK,KAAKV,MAAMM,QAAvD,YAAkE1C,EAAK8E,QACvE9E,EAAK4F,WAAa9C,KAAKV,M,SACVU,KAAKnD,MAAMkG,SAAX,UAAuB/C,KAAKV,MAAM0D,UAAlC,YAA+ChD,KAAKV,MAAM2D,cAAgB/F,EAAM,CAAE0F,MAAM,I,uJAxBvElC,GCG5BwC,EAAmB,CACvBxC,SACAkB,UACAc,QAGK,SAASS,EAAe7D,EAAOzC,GACpC,IAAKoE,eAAkB3B,EAAO,QAC5B,MAAM,IAAIe,MAAJ,+BAER,GAAIY,eAAkBiC,EAAkB5D,EAAM,SAC5C,OAAO,IAAI4D,EAAiB5D,EAAM,SAASA,EAAOzC,GAEpD,MAAM,IAAIwD,MAAJ,qBAAwBf,EAAM,QAA9B,uB,yCClBR,IAAI8D,EAAS,WAAa,IAAIC,EAAIrD,KAASsD,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACE,YAAY,aAAa,CAACF,EAAG,oBAAoB,CAACG,MAAM,CAAC,cAAgBN,EAAI/G,QAAQ,OAAS,IAAI,mBAAmB,gBAAgBkH,EAAG,eAAe,CAACG,MAAM,CAAC,WAAWN,EAAIO,QAAQ,eAAeP,EAAIQ,MAAM,eAAc,EAAK,QAAUR,EAAI/G,SAASwH,GAAG,CAAC,OAAST,EAAIU,YAAcV,EAAI/G,QAAwuB+G,EAAIW,KAAnuBR,EAAG,cAAc,CAACE,YAAY,aAAa,CAAEL,EAAIY,QAAc,OAAET,EAAG,cAAc,CAACE,YAAY,aAAaL,EAAIa,GAAIb,EAAW,SAAE,SAASnC,EAAKN,GAAG,OAAO4C,EAAG,kBAAkB,CAACW,IAAIvD,EAAE+C,MAAM,CAAC,IAAMN,EAAIe,WAAWC,IAAInD,EAAKoD,OAAO,KAAOpD,EAAKqD,KAAK,GAAKlB,EAAI7G,KAAKgI,IAAI,GAAKnB,EAAI7G,KAAKiI,IAAIX,GAAG,CAAC,OAAST,EAAIU,eAAc,GAAGV,EAAIW,KAAMX,EAAIqB,WAAiB,OAAElB,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACL,EAAIsB,GAAG,IAAItB,EAAIuB,GAAGvB,EAAIwB,GAAG,uBAAuB,OAAOxB,EAAIW,KAAMX,EAAIqB,WAAiB,OAAElB,EAAG,cAAc,CAACE,YAAY,aAAaL,EAAIa,GAAIb,EAAc,YAAE,SAASnC,EAAKN,GAAG,OAAO4C,EAAG,kBAAkB,CAACW,IAAIvD,EAAE+C,MAAM,CAAC,IAAMN,EAAIe,WAAWC,IAAInD,EAAKoD,OAAO,KAAOpD,EAAKqD,KAAK,GAAKlB,EAAI7G,KAAKgI,IAAI,GAAKnB,EAAI7G,KAAKiI,IAAIX,GAAG,CAAC,OAAST,EAAIU,eAAc,GAAGV,EAAIW,MAAM,IAAa,IAC5nCc,EAAkB,G,wICStB,GACEC,KAAM,YACNC,WAAY,CACVC,gBAAiB,WAArB,yIACIC,aAAc,WAAlB,gKAEEC,OAAQ,CAAC,EAAX,aACE7F,MAAO,CACLsE,QAAS,CACPwB,KAAM1G,OACN2G,QAAS,WACP,MAAO,CAAf,YAGIC,cAAe,CACbF,KAAM1G,OACN2G,QAAS,WACP,MAAO,KAGXvC,WAAY,CACVsC,KAAM1G,OACN2G,QAAS,WACP,MAAO,KAGX7I,KAAM,CACJ4I,KAAM1G,OACN2G,QAAS,WACP,MAAO,MAIbnI,KAAM,WAAR,OACA,WACA,WACA,UACA,YACA,QACA,kBACA,gBACA,YACA,cACA,YACA,WACA,gBAEEqI,SAAU,CACR1B,MADJ,WAEM,OAAI7D,KAAKoE,WAAWC,KAAOrE,KAAKwF,SACvBxF,KAAKoE,WAAWC,IAAIrE,KAAKwF,SAAS,WAAW,KAE/CxF,KAAKxD,KAAK,MAEnBiJ,SAPJ,WAQM,GAAKzF,KAAK0F,OAAO1H,OAAjB,CAEA,IAAN,iBAEM,OAAOgC,KAAK2F,MAAMC,MAAK,SAA7B,wBAEIrJ,IAdJ,WAeM,GAAIyD,KAAKxD,MAAQwD,KAAK6F,QAAU7F,KAAK6F,OAAO9F,YAClD,4CAIE+F,MAAO,CACLvJ,IAAK,SAAT,GACU2B,GACF8B,KAAK+F,QAGTjD,WANJ,WAOM9C,KAAK6F,OAAS,OAApB,OAAoB,CAApB,+BAGE,YA7EF,WA6EA,wJACA,+CADA,8CAGEG,aAhFF,WAiFS,OAAT,OAAS,CAAT,uCACMhG,KAAKiG,OAAOC,eAAelG,KAAKmG,SAASpB,KAAM,EAArD,MAES,OAAT,OAAS,CAAT,gCACM/E,KAAKiG,OAAOC,eAAe,YAAa,EAA9C,OAGEE,QAAS,CACP,KADJ,WACA,0KACA,6BADA,gBAEA,oBAFA,sCAIA,qBAJA,OAIA,aAJA,cAUA,GAJA,cACA,aACA,gBACA,sBACA,GACA,uBACA,eACA,EAFA,wBAEA,GACA,gBACA,YAEA,EADA,YACA,UAEA,aAEA,yBAGA,iCACA,oCAzBA,+CA4BI,mBA7BJ,SA6BA,8JACA,yBADA,uBAEA,aAFA,SAGA,wCACA,+DACA,WALA,OAOA,UACA,aARA,8CAYIC,qCAAsC,SAA1C,GACM,IAAN,EACA,8BAEQR,EADE,OAAV,OAAU,CAAV,gBACiB,OAAjB,OAAiB,CAAjB,0BAEiB7F,KAAK6F,OAEhB/I,EAAQI,KAAKoJ,MAAQ,CAACtG,KAAKoE,YAC3BtH,EAAQI,KAAKuC,OAAS,KACtBoG,EAAOzH,KAAKtB,MCrJ8Y,I,qECQ5ZyJ,EAAY,eACd,EACAnD,EACA0B,GACA,EACA,KACA,KACA,MAIa,aAAAyB,EAAiB,QAMhC,IAAkBA,EAAW,CAACC,aAAA,KAAWC,kBAAA,Q,kCCzBzC,yBAAimB,EAAG","file":"js/chunk-07626ab0.38c74922.js","sourcesContent":["import { processInDataSource } from '../../BubotCore/helpers/mixinStore/index'\r\nimport { initForm, error } from '../../BubotCore/helpers/mixinStore/actions'\r\nimport { initStoreKey, updateItemProps } from '../../BubotCore/helpers/mixinStore/mutations'\r\nimport { mode, getProps } from '../../BubotCore/helpers/mixinStore/getters'\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state: {},\r\n  //   namespace: 'OcfDriver',\r\n  //   formCheckProperty: 'columns'\r\n  // },\r\n  getters: {\r\n    // get: get,\r\n    mode: mode,\r\n    getProps: getProps\r\n  },\r\n  mutations: {\r\n    initStoreKey: initStoreKey,\r\n    updateItemProps: updateItemProps,\r\n    loading(state, { uid, loading, item} ) {\r\n      state[uid] = { loading, item}\r\n    },\r\n  },\r\n  actions: {\r\n    initForm: initForm,\r\n    error: error,\r\n    read: async (store, payload) => {\r\n      store.commit('loading', { uid: payload.store.uid, item: {}, loading: true })\r\n      let item = await processInDataSource('read', store, payload)\r\n      store.commit('loading', { uid: payload.store.uid, item, loading: false })\r\n    },\r\n    update: async (store, payload) => {\r\n      // store.commit('loading', { uid: payload.store.uid, value: true })\r\n      payload.data = store.state[payload.store.uid].item\r\n      await processInDataSource('update', store, payload)\r\n      // store.commit('read', { uid: payload.store.uid, data: data })\r\n    }\r\n  }\r\n}\r\n","var $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar anObject = require('../internals/an-object');\nvar has = require('../internals/has');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\n\n// `Reflect.get` method\n// https://tc39.github.io/ecma262/#sec-reflect.get\nfunction get(target, propertyKey /* , receiver */) {\n  var receiver = arguments.length < 3 ? target : arguments[2];\n  var descriptor, prototype;\n  if (anObject(target) === receiver) return target[propertyKey];\n  if (descriptor = getOwnPropertyDescriptorModule.f(target, propertyKey)) return has(descriptor, 'value')\n    ? descriptor.value\n    : descriptor.get === undefined\n      ? undefined\n      : descriptor.get.call(receiver);\n  if (isObject(prototype = getPrototypeOf(target))) return get(prototype, propertyKey, receiver);\n}\n\n$({ target: 'Reflect', stat: true }, {\n  get: get\n});\n","// import { processInDataSource } from '../../BubotCore/helpers/mixinStore/index'\r\n// import { initForm, error } from '../../BubotCore/helpers/mixinStore/actions'\r\n// import { initStoreKey, updateItemProps } from '../../BubotCore/helpers/mixinStore/mutations'\r\n// import { mode, getProps } from '../../BubotCore/helpers/mixinStore/getters'\r\nimport axios from 'axios'\r\nimport Vue from 'vue'\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state: {},\r\n  // getters: {},\r\n  mutations: {\r\n    schema (state, { uid, schema }) {\r\n      Vue.set(state, uid, schema)\r\n    },\r\n  },\r\n  actions: {\r\n    async read (store, schemaUid) {\r\n      if (!schemaUid) {\r\n        return {}\r\n      }\r\n      // if (!payload.href && !payload.schemaUid) {\r\n      //   console.error(`not defined schema for \"${payload.href}\"`)\r\n      //   return {}\r\n      // }\r\n      // const schemaUid = payload.schemaUid\r\n      // const schemaId = rt.join('+')\r\n      if (Object.prototype.hasOwnProperty.call(store.state, schemaUid)) {\r\n        return await store.state[schemaUid]\r\n      } else {\r\n        console.log('load scheme ' + schemaUid)\r\n        let result = {}\r\n        try {\r\n          const response = await axios.get(`/api/${store.rootState.app}/OcfSchema/read`, { params: { id: schemaUid } })\r\n          result = response.data\r\n        } catch (e) {\r\n          result = {}\r\n        }\r\n        store.commit('schema', {\r\n          uid: schemaUid, schema: result\r\n        })\r\n        return result\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { updateObject } from '../../../helpers/baseHelper'\r\n\r\nexport default class Source {\r\n  rawData = []\r\n  filteredRawData = []\r\n  total = 0\r\n\r\n  rows = []\r\n  props = {\r\n    rows: [],\r\n    page: 1,\r\n    filter: {},\r\n    itemsPerPage: 25,\r\n    appName: '',\r\n    objName: '',\r\n    dataTableOptions: {},\r\n    filterFields: [],\r\n    keyProperty: 'id'\r\n  }\r\n  store\r\n  keyProperty;\r\n  loading = false\r\n  filterFields = []\r\n\r\n  constructor (props, store) {\r\n    this.props.appName = store.state.app\r\n    this.store = store\r\n    this.changeProps(props)\r\n    this.rawData = this.props.rows || []\r\n    this.keyProperty = this.props.keyProperty || 'id'\r\n  }\r\n\r\n  changeProps (props) {\r\n    this.props = updateObject(this.props, props)\r\n  }\r\n\r\n  changeFilter (filter) {\r\n    this.props.filter = updateObject(this.props.filter, filter)\r\n    this.props.dataTableOptions.page = 1\r\n    this.query()\r\n  }\r\n\r\n  query () {\r\n    throw new Error('method query not implemented in source class')\r\n  }\r\n\r\n  call () {\r\n    throw new Error('method call not implemented in source class')\r\n  }\r\n\r\n  read () {\r\n    throw new Error('method read not implemented in source class')\r\n  }\r\n}\r\n","\r\nimport Source from './Source'\r\nimport { isEmptyObject, objHasOwnProperty } from '../../../helpers/baseHelper'\r\n\r\nconst conditions = {\r\n  'equals': function (filterField, filterValue, row) {\r\n    if (row[filterField['name']] === filterValue)\r\n      return true\r\n    return false\r\n  },\r\n  'in': function (filterField, filterValue, row) {\r\n    if (filterValue[0] && row[filterField['name']] < filterValue[0]) {\r\n      return false\r\n    }\r\n    if (filterValue[1] && row[filterField['name']] > filterValue[1]) {\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n}\r\n\r\nexport default class Memory extends Source {\r\n  data = []\r\n\r\n  queryAll() {\r\n    this.loading = true;\r\n    this.filteredRawData = []\r\n    for (let i = 0; i < this.rawData.length; i++) {\r\n      const row = this.rawData[i]\r\n      let match = true\r\n      if (!isEmptyObject(this.props.filter)) {\r\n        for (let i = 0; i < this.filterFields.length; i++) {\r\n          if (Object.prototype.hasOwnProperty.call(this.props.filter, this.fields[i]['name'])) {\r\n            let condition = conditions[this.fields[i]['type'] || 'equals']\r\n            if (!condition(this.fields[i], this.props.filter[this.fields[i]['name']], row)) {\r\n              match = false\r\n              break\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (!match)\r\n        continue\r\n      if (objHasOwnProperty(this.props.filter, 'searchString') && this.props.filter['searchString']) {\r\n        match = false\r\n        for (let elem in row) {\r\n          if (Object.prototype.hasOwnProperty.call(row, elem)) {\r\n            try {\r\n              if (row[elem].indexOf(this.props.filter['searchString']) >= 0) {\r\n                match = true\r\n                break;\r\n              }\r\n            } catch (e) {\r\n              // continue regardless of error\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (match) {\r\n        this.filteredRawData.push(row)\r\n      }\r\n    }\r\n    return this.filteredRawData\r\n  }\r\n\r\n  query () {\r\n    this.queryAll()\r\n    const limit = this.props.itemsPerPage\r\n    const page = this.props.page\r\n    const start = (page - 1) * limit;\r\n    const end = start + limit;\r\n    this.rows = this.filteredRawData.slice(start, end);\r\n    this.total = this.filteredRawData.length\r\n    this.loading = false;\r\n  }\r\n\r\n  async read (id) {\r\n    console.log(id)\r\n  }\r\n\r\n  async create (data) {\r\n    console.log(data)\r\n  }\r\n\r\n  async update (data) {\r\n    console.log(data)\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\n","import Source from './Source'\r\nimport buxios from '../../../helpers/buxios'\r\nimport { updateObject } from '../../../helpers/baseHelper'\r\n// import ExtException from '../../../helpers/ExtException'\r\n\r\nexport default class Service extends Source {\r\n  getAll() {\r\n    return null\r\n  }\r\n\r\n  queryAll() {\r\n    return null\r\n  }\r\n\r\n  async query () {\r\n    this.loading = true\r\n    let resp\r\n    try {\r\n      const limit = this.props.itemsPerPage\r\n      const page = this.props.page\r\n      let params = updateObject({\r\n        limit,\r\n        page\r\n      }, this.props.filter)\r\n      // params = this.props.filter\r\n      resp = await buxios.get(`/api/${this.props.appName}/${this.props.objName}/query`,\r\n        { params }\r\n      )\r\n      this.rows = resp.data.rows\r\n      this.total = (page - 1) * limit + this.rows.length + (this.rows.length < limit ? 0 : 1)\r\n    } catch (e) {\r\n      this.error = e\r\n    }\r\n    this.loading = false\r\n  }\r\n\r\n  async read (id) {\r\n    this.loading = true\r\n    let resp\r\n    try {\r\n      resp = await buxios.get(`/api/${this.props.appName}/${this.props.objName}/read`,\r\n        { params: { id } }\r\n      )\r\n      this.loading = false\r\n      return resp.data\r\n    } finally {\r\n      this.loading = false\r\n    }\r\n  }\r\n\r\n  async call (payload) {\r\n    this.loading = true\r\n    let resp\r\n    try {\r\n      resp = await buxios.post(`/api/${this.props.appName}/${this.props.objName}/${payload.method}`, payload.data)\r\n      this.loading = false\r\n      return resp.data\r\n    } finally {\r\n      this.loading = false\r\n    }\r\n\r\n  }\r\n}\r\n","import getPrototypeOf from \"./getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import Memory from './Memory'\r\n\r\nexport default class Vuex extends Memory {\r\n  data = []\r\n\r\n  queryAll () {\r\n    this.rawData = this.store.getters[`${this.props['storeName']}/getRawDataSource`](this.props.filter.operation || {}, { root: true }) || [];\r\n    return super.queryAll();\r\n  }\r\n\r\n  async read (id) {\r\n    console.log(id)\r\n  }\r\n\r\n  async create (data) {\r\n    console.log(data)\r\n  }\r\n\r\n  async update (data) {\r\n    console.log(data)\r\n  }\r\n\r\n  async call (data) {\r\n    // payload.actionName = `${this.props.appName}/${this.props.objName}/${this.props.method}`\r\n    data.actionName =  `${this.props.appName}/${this.props.objName}/${data.method}`\r\n    data.dataSource = this.props\r\n    return await this.store.dispatch(`${this.props.storeName}/${this.props.dispatchName}`, data, { root: true })\r\n  }\r\n}\r\n\r\n\r\n","import { objHasOwnProperty } from '../../../helpers/baseHelper'\r\n\r\nimport Memory from './Memory'\r\nimport Service from './Service'\r\nimport Vuex from './Vuex'\r\nconst availableSources = {\r\n  Memory,\r\n  Service,\r\n  Vuex\r\n}\r\n\r\nexport function initDataSource(props, store) {\r\n  if (!objHasOwnProperty(props, 'type')) {\r\n    throw new Error(`dataSource type not defined`)\r\n  }\r\n  if (objHasOwnProperty(availableSources, props['type'])) {\r\n    return new availableSources[props['type']](props, store)\r\n  }\r\n  throw new Error(`dataSource ${props['type']} not implemented`)\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"pa-0 ma-0\"},[_c('v-progress-linear',{attrs:{\"indeterminate\":_vm.loading,\"height\":\"2\",\"background-color\":\"header1_bg\"}}),_c('PanelToolBar',{attrs:{\"tool-bar\":_vm.toolBar,\"header-value\":_vm.title,\"edit-header\":true,\"loading\":_vm.loading},on:{\"action\":_vm.onAction}}),(!_vm.loading)?_c('v-container',{staticClass:\"pa-4 ma-0\"},[(_vm.mainRes.length)?_c('v-container',{staticClass:\"pa-0 ma-0\"},_vm._l((_vm.mainRes),function(elem,i){return _c('OcfResourceTmpl',{key:i,attrs:{\"res\":_vm.deviceLink.res[elem.index],\"href\":elem.href,\"di\":_vm.item._id,\"ep\":_vm.item.ep},on:{\"action\":_vm.onAction}})}),1):_vm._e(),(_vm.serviceRes.length)?_c('div',{staticClass:\"text-h6 py-2\"},[_vm._v(\" \"+_vm._s(_vm.$t('ocfServiceResTitle'))+\" \")]):_vm._e(),(_vm.serviceRes.length)?_c('v-container',{staticClass:\"pa-0 ma-0\"},_vm._l((_vm.serviceRes),function(elem,i){return _c('OcfResourceTmpl',{key:i,attrs:{\"res\":_vm.deviceLink.res[elem.index],\"href\":elem.href,\"di\":_vm.item._id,\"ep\":_vm.item.ep},on:{\"action\":_vm.onAction}})}),1):_vm._e()],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\r\nimport BaseTemplateMixin from '../../BubotCore/helpers/mixinTemplate/baseForm'\r\nimport ActionMixin from '../../BubotCore/helpers/mixinTemplate/action'\r\nimport { updateObject, objHasOwnProperty, sortArrayObject } from '../../BubotCore/helpers/baseHelper'\r\nimport { initDataSource } from '../../BubotCore/components/Types/Source/DataSourceLoader'\r\nimport storage from './store'\r\n// import Vue from 'vue'\r\nimport schemaStorage from './OcfSchema.store'\r\n\r\n\r\nexport default {\r\n  name: 'OcfDevice',\r\n  components: {\r\n    OcfResourceTmpl: () => import('./OcfDeviceResource'),\r\n    PanelToolBar: () => import('../../BubotCore/components/Simple/PanelToolBar'),\r\n  },\r\n  mixins: [BaseTemplateMixin, ActionMixin],\r\n  props: {\r\n    toolBar: {\r\n      type: Object,\r\n      default: function () {\r\n        return { items: [] }\r\n      }\r\n    },\r\n    defaultAction: {\r\n      type: Object,\r\n      default: function () {\r\n        return {}\r\n      }\r\n    },\r\n    dataSource: {\r\n      type: Object,\r\n      default: function () {\r\n        return {}\r\n      }\r\n    },\r\n    item: {\r\n      type: Object,\r\n      default: function () {\r\n        return {}\r\n      }\r\n    },\r\n  },\r\n  data: () => ({\r\n    visible: false,\r\n    loading: false,\r\n    active: [],\r\n    avatar: null,\r\n    open: [],\r\n    props_schema: null,\r\n    props_data: null,\r\n    source: null,\r\n    deviceLink: {},\r\n    resIndex: {},\r\n    mainRes: [],\r\n    serviceRes: []\r\n  }),\r\n  computed: {\r\n    title() {\r\n      if (this.deviceLink.res && this.resIndex) {\r\n        return this.deviceLink.res[this.resIndex['/oic/d']]['n']\r\n      }\r\n      return this.item['n']\r\n    },\r\n    selected () {\r\n      if (!this.active.length) return undefined\r\n\r\n      const id = this.active[0]\r\n\r\n      return this.users.find(user => user.id === id)\r\n    },\r\n    uid () {\r\n      if (this.item && this.source && this.source.keyProperty)\r\n        return this.item[this.source.keyProperty]\r\n      return undefined\r\n    }\r\n  },\r\n  watch: {\r\n    uid: function (value) {\r\n      if (value) {\r\n        this.init()\r\n      }\r\n    },\r\n    dataSource () {\r\n      this.source = initDataSource(this.dataSource, this.$store)\r\n    }\r\n  },\r\n  async beforeMount () {\r\n    this.source = initDataSource(this.dataSource, this.$store)\r\n  },\r\n  beforeCreate () {\r\n    if (!objHasOwnProperty(this.$store.state, this.$options.name)) {\r\n      this.$store.registerModule(this.$options.name, storage)\r\n    }\r\n    if (!objHasOwnProperty(this.$store.state, 'OcfSchema')) {\r\n      this.$store.registerModule('OcfSchema', schemaStorage)\r\n    }\r\n  },\r\n  methods: {\r\n    async init () {\r\n      if (objHasOwnProperty(this.item, 'res')) {\r\n        this.deviceLink = this.item\r\n      } else {\r\n        this.deviceLink = await this.source.read(this.uid)\r\n      }\r\n      this.resIndex = {}\r\n      this.mainRes = []\r\n      this.serviceRes = []\r\n      let links = this.deviceLink['res']\r\n      if (links) {\r\n        for (let i = 0; i < links.length; i++) {\r\n          let href = links[i]['href']\r\n          let _path = `ocfServiceRes.${href}`\r\n          this.resIndex[href] = i\r\n          let res = this.mainRes\r\n          if (this.$t(_path) === _path) { // для служебных ресурсов имя показывается стандартное и оно локализовано\r\n            res = this.mainRes\r\n          } else {\r\n            res = this.serviceRes\r\n          }\r\n          res.push({ href: href, index: i })\r\n\r\n        }\r\n        sortArrayObject(this.mainRes, 'href')\r\n        sortArrayObject(this.serviceRes, 'href')\r\n      }\r\n    },\r\n    async actionUpdateHeader (action) {\r\n      if (action.data.action === 'change') {\r\n        this.loading = true\r\n        await this.$store.dispatch('OcfResource/update', {\r\n          di: this.item._id, ep: this.item.ep, href: '/oic/d', res: { 'n': action.data.value }\r\n        }, { root: true })\r\n        // this.emitAction('UpdateRes', { href: this.href, res: this.editData })\r\n        this.edit = false\r\n        this.loading = false\r\n\r\n      }\r\n    },\r\n    actionCallDataSourceForSelectedItems: function (actionData) {\r\n      let source\r\n      let payload = updateObject({ data: {} }, actionData)\r\n      if (objHasOwnProperty(actionData, 'dataSource')) {\r\n        source = initDataSource(actionData.dataSource, this.$store)\r\n      } else {\r\n        source = this.source\r\n      }\r\n      payload.data.items = [this.deviceLink]\r\n      payload.data.filter = null\r\n      source.call(payload)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  div .PanelHeader {\r\n    .v-text-field > .v-input__control > .v-input__slot:before {\r\n      border-style: none;\r\n    }\r\n    input {\r\n      font-size: x-large;\r\n    }\r\n  }\r\n  .v-toolbar__content {\r\n    padding-right: 0;\r\n  }\r\n</style>\r\n\r\n<template>\r\n  <v-container class=\"pa-0 ma-0\">\r\n    <v-progress-linear\r\n      :indeterminate=\"loading\"\r\n      height=\"2\"\r\n      background-color=\"header1_bg\"\r\n    />\r\n    <PanelToolBar\r\n      :tool-bar=\"toolBar\"\r\n      :header-value=\"title\"\r\n      :edit-header=\"true\"\r\n      :loading=\"loading\"\r\n      @action=\"onAction\"\r\n    ></PanelToolBar>\r\n    <v-container\r\n      v-if=\"!loading\"\r\n      class=\"pa-4 ma-0\"\r\n    >\r\n      <v-container\r\n        v-if=\"mainRes.length\"\r\n        class=\"pa-0 ma-0\"\r\n      >\r\n        <OcfResourceTmpl\r\n          v-for=\"(elem, i) in mainRes\"\r\n          :key=\"i\"\r\n          :res=\"deviceLink.res[elem.index]\"\r\n          :href=\"elem.href\"\r\n          :di=\"item._id\"\r\n          :ep=\"item.ep\"\r\n          @action=\"onAction\"\r\n        />\r\n      </v-container>\r\n      <div\r\n        v-if=\"serviceRes.length\"\r\n        class=\"text-h6 py-2\"\r\n      >\r\n        {{ $t('ocfServiceResTitle') }}\r\n      </div>\r\n      <v-container\r\n        v-if=\"serviceRes.length\"\r\n        class=\"pa-0 ma-0\"\r\n      >\r\n        <OcfResourceTmpl\r\n          v-for=\"(elem, i) in serviceRes\"\r\n          :key=\"i\"\r\n          :res=\"deviceLink.res[elem.index]\"\r\n          :href=\"elem.href\"\r\n          :di=\"item._id\"\r\n          :ep=\"item.ep\"\r\n          @action=\"onAction\"\r\n        />\r\n      </v-container>\r\n    </v-container>\r\n  </v-container>\r\n</template>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OcfDevice.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OcfDevice.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OcfDevice.vue?vue&type=template&id=7e3ed529&\"\nimport script from \"./OcfDevice.vue?vue&type=script&lang=js&\"\nexport * from \"./OcfDevice.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OcfDevice.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\ninstallComponents(component, {VContainer,VProgressLinear})\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OcfDevice.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OcfDevice.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}